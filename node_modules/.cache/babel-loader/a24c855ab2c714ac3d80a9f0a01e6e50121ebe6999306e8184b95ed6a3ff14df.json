{"ast":null,"code":"var _jsxFileName = \"/Users/alexanderrezaei/Desktop/examfinall/src/components/login/LoginForm.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { saveToken, saveUser, saveAvatar } from \"../storage/Storage\";\nimport { BASE_URL, TOKEN_PATH } from \"../../api/api\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Form() {\n  _s();\n  var _errors$email, _errors$password;\n  const navigate = useNavigate();\n  const [errorMessage, setError] = useState();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm();\n  const onSubmit = data => {\n    login(data.email, data.password);\n  };\n  function login(userEmail, userPassword) {\n    setError(\"\");\n    submitLogin(userEmail, userPassword);\n  }\n  async function submitLogin(email, password) {\n    const url = BASE_URL + TOKEN_PATH;\n    const data = JSON.stringify({\n      email: email,\n      password: password\n    });\n    const headers = {\n      method: \"POST\",\n      body: data,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    try {\n      const res = await fetch(url, headers);\n      const json = await res.json();\n      console.log(json);\n      if (json.errors) {\n        console.log(\"wrong password\");\n        setError(\"Wrong Password or email\");\n      } else {\n        saveToken(json.accessToken);\n        saveUser(json.name);\n        saveAvatar(json.avatar);\n        navigate(\"/\");\n        console.log(\"right password\");\n      }\n    } catch (error) {}\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mt-[70px]\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      className: \" my-[0] mx-[auto] flex flex-col w-[100%] max-w-[600px] h-[100%] items-center rounded-[10px]\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col w-[100%] pl-[30px] pr-[41px]\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ...register(\"email\", {\n            required: true\n          }),\n          type: \"email\",\n          placeholder: \"Your Noroff email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: ((_errors$email = errors.email) === null || _errors$email === void 0 ? void 0 : _errors$email.type) == \"required\" && \"Email is required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          ...register(\"password\", {\n            required: true\n          }),\n          type: \"password\",\n          placeholder: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: ((_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.type) == \"required\" && \"password is required\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col md:flex-row  mt-[14px] mb-[40px]\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"mx-[auto] md:mr-[19px]\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mt-[14px] md:mt-[0px]\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: errorMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n}\n_s(Form, \"pzmUeHzy6v30DdmD3xcv/VLGfPM=\", false, function () {\n  return [useNavigate, useForm];\n});\n_c = Form;\nexport default Form;\nvar _c;\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"names":["React","useState","useForm","saveToken","saveUser","saveAvatar","BASE_URL","TOKEN_PATH","useNavigate","Form","navigate","errorMessage","setError","register","handleSubmit","formState","errors","onSubmit","data","login","email","password","userEmail","userPassword","submitLogin","url","JSON","stringify","headers","method","body","res","fetch","json","console","log","accessToken","name","avatar","error","required","type"],"sources":["/Users/alexanderrezaei/Desktop/examfinall/src/components/login/LoginForm.js"],"sourcesContent":["import React from \"react\";\nimport { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { saveToken, saveUser, saveAvatar } from \"../storage/Storage\";\nimport { BASE_URL, TOKEN_PATH } from \"../../api/api\";\nimport { useNavigate } from \"react-router-dom\";\nfunction Form() {\n    const navigate = useNavigate();\n    const [errorMessage, setError] = useState();\n    const {\n        register,\n        handleSubmit,\n        formState: { errors },\n    } = useForm();\n\n    const onSubmit = (data) => {\n        login(data.email, data.password);\n    };\n\n    function login(userEmail, userPassword) {\n        setError(\"\");\n        submitLogin(userEmail, userPassword);\n    }\n\n    async function submitLogin(email, password) {\n        const url = BASE_URL + TOKEN_PATH;\n        const data = JSON.stringify({\n            email: email,\n            password: password,\n        });\n        const headers = {\n            method: \"POST\",\n            body: data,\n            headers: {\n                \"Content-Type\": \"application/json\",\n            },\n        };\n        try {\n            const res = await fetch(url, headers);\n            const json = await res.json();\n            console.log(json);\n            if (json.errors) {\n                console.log(\"wrong password\");\n                setError(\"Wrong Password or email\");\n            } else {\n                saveToken(json.accessToken);\n                saveUser(json.name);\n                saveAvatar(json.avatar)\n                navigate(\"/\");\n                console.log(\"right password\");\n            }\n        } catch (error) {}\n    }\n\n    return (\n        <div className=\"mt-[70px]\">\n            <form\n                onSubmit={handleSubmit(onSubmit)}\n                className=\" my-[0] mx-[auto] flex flex-col w-[100%] max-w-[600px] h-[100%] items-center rounded-[10px]\"\n            >\n                <h1 className=\"text-center\">Login</h1>\n                <div className=\"flex flex-col w-[100%] pl-[30px] pr-[41px]\">\n                    <input\n                        {...register(\"email\", { required: true })}\n                        type=\"email\"\n                        placeholder=\"Your Noroff email\"\n                    />\n                    <p>\n                        {errors.email?.type == \"required\" &&\n                            \"Email is required\"}\n                    </p>\n                    <input\n                        {...register(\"password\", { required: true })}\n                        type=\"password\"\n                        placeholder=\"Password\"\n                    />\n                    <p>\n                        {errors.password?.type == \"required\" &&\n                            \"password is required\"}\n                    </p>\n                </div>\n                <div className=\"flex flex-col md:flex-row  mt-[14px] mb-[40px]\">\n                    <button type=\"submit\" className=\"mx-[auto] md:mr-[19px]\">\n                        Login\n                    </button>\n                    <button className=\"mt-[14px] md:mt-[0px]\">Register</button>\n                </div>\n                <p>{errorMessage}</p>\n            </form>\n        </div>\n    );\n}\n\nexport default Form;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}